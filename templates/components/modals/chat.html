<div class="ai-tooltip" :class="tooltipVisible ? 'visible' : ''" :style="`top: ${tooltipY}px; left: ${tooltipX}px`">
    <span class="text-blue-400 text-[10px] font-bold uppercase block mb-1">AI Insight</span>
    <span x-text="tooltipText"></span>
</div>

<div class="fixed inset-y-0 right-0 w-[400px] bg-[#0A0A0A] border-l border-white/10 z-[60] transform transition-transform duration-500 shadow-2xl flex flex-col translate-x-full"     :class="chatOpen ? 'translate-x-0' : 'translate-x-full'" x-cloak>
    <div class="p-6 border-b border-white/5 flex justify-between items-center">
        <h3 class="font-bold">Assistant</h3>
        <button @click="chatOpen = false" class="text-white/50 hover:text-white">âœ•</button>
    </div>
    <div class="flex-1 overflow-y-auto p-6 space-y-6 custom-scroll" id="chat-container">
        <template x-for="msg in chatHistory">
            <div class="flex gap-4" :class="msg.role === 'user' ? 'flex-row-reverse' : ''">
                <div class="px-5 py-3 text-sm leading-relaxed rounded-2xl max-w-[85%]"
                     :class="[
                        msg.role === 'user' ? 'bg-blue-600 text-white' : 'bg-white/5 border border-white/10 text-white/90',
                        msg.typing ? 'typing-cursor' : ''
                     ]">
                     <span x-text="msg.text"></span>
                </div>
            </div>
        </template>
    </div>
    <div class="p-4 border-t border-white/5 bg-black/50 backdrop-blur-md">
        <form @submit.prevent="sendMessage" class="relative">
            <input type="text" x-model="chatInput" placeholder="Ask anything..." class="w-full bg-white/5 border border-white/10 rounded-xl px-5 py-4 text-sm text-white focus:outline-none focus:border-blue-500 transition-all">
        </form>
    </div>
</div>